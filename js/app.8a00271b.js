(function(){var e={3529:function(e,t,a){"use strict";var n=a(7162),o=a(8046),r=a(9197),s=a(8473);function i(e,t,a,n,o,r){const i=(0,s.up)("router-view"),c=(0,s.up)("main-layout"),l=(0,s.up)("robo-loader"),u=(0,s.up)("robo-layout-section"),d=(0,s.up)("loader-layout");return n.isReady?((0,s.wg)(),(0,s.j4)(c,{key:0,pagetitle:n.title},{default:(0,s.w5)((()=>[(0,s.Wm)(i)])),_:1},8,["pagetitle"])):((0,s.wg)(),(0,s.j4)(d,{key:1,pagetitle:n.title},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{gcenter:""},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{size:"2"})])),_:1})])),_:1},8,["pagetitle"]))}function c(e,t,a,n,o,r){const i=(0,s.up)("dapp-header"),c=(0,s.up)("robo-layout");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{title:a.pagetitle},null,8,["title"]),(0,s.WI)(e.$slots,"default")])),_:3})}function l(e,t,a,n,o,r){const i=(0,s.up)("robo-layout-header");return o.renderComponent?((0,s.wg)(),(0,s.j4)(i,{key:0,logoIcon:"images/icon_white.svg",navigation:o.navigation,title:a.title,version:o.version},null,8,["navigation","title","version"])):(0,s.kq)("",!0)}var u=a(5984),d=a.n(u);function p(e){return new(d())(e.toString())}function m(e,t){return p(e).todp(t)}function f(e,t=0,a){return p(e).div(new(d())(10).pow(t.toString())).todp(a).toString()}d().set({toExpNeg:-31,toExpPos:31});var v=a(5633),w=a(4188),g={props:{title:{type:String,default:"Robonomics Dapp"}},inject:["RobonomicsProvider"],data(){return{renderComponent:!0,navigation:[{title:"Other",links:[{title:"Services",link:this.$router.resolve({name:"services"}).path,type:"router"}]},{title:"Tokenomics",links:[{title:"Uniswap",link:"https://app.uniswap.org/#/swap?inputCurrency=0x7de91b204c1c737bcee6f000aaa6569cf7061cb7&outputCurrency=0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",type:"external"},{title:"About XRT",link:"https://robonomics.network/xrt/",type:"external"}]},{title:"Tools",links:[{title:"Substrate Portal",link:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/explorer",type:"external"},{title:"Subscan",link:"https://robonomics.subscan.io/",type:"external"},{title:"Polkassembly",link:"https://robonomics.polkassembly.io/",type:"external"}]},{title:"Kusama XCM",links:[{title:"Moonriver",link:"https://apps.moonbeam.network/moonriver",type:"external"},{title:"Basilisk",link:"https://app.basilisk.cloud/pools-and-farms",type:"external"},{title:"Solarbeam",link:"https://analytics.solarbeam.io/pairs/0x5261e0ce96289e6c3a16da45a2e52d1ab1a0e9c3",type:"external"}]}],version:" "}},computed:{robonomics:function(){return(0,w.IU)(this.RobonomicsProvider.instance.value)}},watch:{"$store.state.robonomicsUIvue.polkadot.extensionObj":function(e){e.signer&&e.signer.signRaw&&this.$store.state.robonomicsUIvue.polkadot.address&&this.handlerAccount(this.$store.state.robonomicsUIvue.polkadot.address)},"$store.state.robonomicsUIvue.polkadot.address":{handler:function(e){e&&this.$store.state.robonomicsUIvue.polkadot.extensionObj.signer&&this.$store.state.robonomicsUIvue.polkadot.extensionObj.signer.signRaw&&this.handlerAccount(e)},immediate:!0},$route:async function(){this.renderComponent=!1,await this.$nextTick(),this.renderComponent=!0}},async created(){try{const e=await v.Z.get("https://api.github.com/repos/airalab/dapp.robonomics.network/releases/latest");e.data.tag_name&&(this.version=e.data.tag_name)}catch(e){console.log("dApp version not found.")}},methods:{async handlerAccount(e){if(!this.RobonomicsProvider.isReady.value)return;this.unsubscribeBalance&&this.unsubscribeBalance();const t=this.$store.state.robonomicsUIvue.polkadot.accounts.find((t=>t.address===e));t&&(await this.robonomics.accountManager.setSender(e,{type:t.type,extension:this.$store.state.robonomicsUIvue.polkadot.extensionObj}),this.unsubscribeBalance=await this.robonomics.account.getBalance(e,(e=>{const t=e.free.sub(e.feeFrozen);this.$store.commit("polkadot/setBalanceXRT",m(f(t,this.robonomics.api.registry.chainDecimals[0]),4))})))}}},h=a(5312);const y=(0,h.Z)(g,[["render",l]]);var b=y,k={components:{DappHeader:b},props:["pagetitle"]};const _=(0,h.Z)(k,[["render",c]]);var U=_;function S(e,t,a,n,o,r){const i=(0,s.up)("dapp-header"),c=(0,s.up)("robo-layout");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{title:a.pagetitle},null,8,["title"]),(0,s.WI)(e.$slots,"default")])),_:3})}var W=a(7695);function x(){const{instance:e}=(0,s.f3)("RobonomicsProvider");return(0,w.IU)(e).value}const A=(e=null)=>{const t=x(),a=(0,w.iH)(e),n=(0,w.iH)([]),o=async()=>{if(a.value)try{(0,W.Y)(a.value);const e=await t.rws.getDevices(a.value);return void(n.value=e.map((e=>e.toHuman())))}catch(e){console.log(e)}n.value=[]};return(0,s.YP)(a,(async()=>{await o()}),{immediate:!0}),{owner:a,devices:n,loadDevices:o}},I=(e=null)=>{const t=(0,w.iH)(e),a=(0,w.qj)({value:null}),n=x(),{devices:o,loadDevices:r}=A(t),i=()=>n.api.consts.rws.referenceCallWeight,c=async e=>{const t=await n.rws.getLedger(e);if(!t.isEmpty)return t.value},l=864e5,u=async e=>{const t=await c(e);if(!t)return-1;const a=t.freeWeight.toNumber(),n=t.lastUpdate.toNumber(),o=t.issueTime.toNumber(),r=i(),s=Date.now();let u=(()=>{let e;if(t.kind.isLifetime)e=t.kind.value.tps.toNumber();else{const a=t.kind.value.days.toNumber(),n=a*l;e=s<o+n?1e4:0}return e})();const d=s-n;return Math.floor(a+r*u*d/1e9)},d=(0,s.Fl)((()=>{if(null===a.value)return"";const e=(0,w.IU)(a);if(e.value.kind.isLifetime)return null;const t=e.value.issueTime.toNumber();let n=0;return e.value.kind.isDaily&&(n=e.value.kind.value.days.toNumber()),t+n*l})),p=(0,s.Fl)((()=>{if(null===a.value)return 0;const e=(0,w.IU)(a);let t=0;return e.value.kind.isDaily&&(t=e.value.kind.value.days.toNumber()),t/30})),m=(0,s.Fl)((()=>!(null===a.value||null!==d.value&&Date.now()>d.value))),f=(0,s.Fl)((()=>null!==a.value)),v=async()=>{if(t.value)try{(0,W.Y)(t.value);const e=await c(t.value);if(e)return void(a.value=e)}catch(e){console.log(e)}a.value=null};return(0,s.YP)(t,(async()=>{await v()}),{immediate:!0}),{owner:t,dataRaw:a,hasSubscription:f,isActive:m,countMonth:p,validUntil:d,loadLedger:v,devices:o,loadDevices:r,getFreeWeightCalc:u}};var M=a(299),R={components:{DappHeader:b},props:["pagetitle"],setup(){const e=(0,M.oR)(),t=I();(0,s.YP)((()=>e.state.robonomicsUIvue.rws.active),(e=>{t.owner.value=e}),{immediate:!0}),(0,s.YP)([t.owner,t.validUntil],(()=>{e.commit("rws/setExpiredate",t.validUntil)}),{immediate:!0})}};const O=(0,h.Z)(R,[["render",S]]);var j=O,P=a(4731),T=a(3194),H=a(7464),C={name:"App",components:{LoaderLayout:U,MainLayout:j},setup(){const e=(0,s.f3)("RobonomicsProvider"),t=(0,s.f3)("IpfsProvider"),a=(0,M.oR)(),n=(0,P.tv)(),o=(0,P.yj)(),r=(0,w.iH)();a.commit("rws/setKey","88tHsnwjp*p36AurOu28W6UZz"),a.dispatch("rws/init"),a.commit("rws/setLinkActivate",n.resolve({name:"rwsActivate"}).path),a.commit("rws/setLinkSetup",n.resolve({name:"rwsSetup"}).path),a.commit("rws/setLinkSetupnew",n.resolve({name:"rwsSetupNew"}).path),a.commit("rws/setLinkDevices",n.resolve({name:"telemetry"}).path),a.commit("ipfs/setGateways",t.gateways);const i=(0,w.iH)((e=>e?`${e} / Robonomics Dapp`:"Robonomics Dapp"));return(0,T.u)({titleTemplate:i.value,meta:[{rel:"icon",type:"image/png",sizes:"192x192",href:"images/meta/app-icon-192.png"},{rel:"icon",type:"image/png",sizes:"512x512",href:"images/meta/app-icon-512.png"}]}),(0,H.QI)({ogTitle:i.value,description:"Decetralized application for working with Robonomics Parachain, Cloud tools and Smart home",ogDescription:"Decetralized application for working with Robonomics Parachain, Cloud tools and Smart home",ogImage:"images/meta/OG-Default.png"}),(0,s.YP)(o,(()=>{r.value=o?.meta?.title})),{isReady:e.isReady,title:r}}};const $=(0,h.Z)(C,[["render",i]]);var N=$,D=(a(7658),a(5675));class F{constructor(e){this.endpoint=e,this.authHeader=null,this.robonomics=null,this._create()}_create(){this.client=(0,D.Ue)({...this._options()})}_options(){return{url:this.endpoint,headers:{authorization:`Basic ${this.authHeader}`,robonomics:this.robonomics}}}isAuth(){return!!this.authHeader&&!!this.robonomics}auth(e,t,a){const n=`sub-${t}:${a}`;this.authHeader=Buffer.from(n).toString("base64"),this.robonomics=e,this._create()}authClear(){this.authHeader=null,this.robonomics=null,this._create()}async ls(e){const t=[];for await(const a of this.client.ls(e))"file"===a.type&&t.push(a);return t}async cat(e){const t=async e=>{const t=new TextDecoder;let a="";for await(const n of this.client.cat(e))a+=t.decode(n,{stream:!0});return a};return await t(e)}async add(e){return await this.client.add(e)}async catViaGateway(e,t,a=5){for(let o=1;o<=a;o++)try{return(await v.Z.get(`${e}${t}`)).data}catch(n){console.log(n)}throw new Error("File not available")}async catViaGateways(e,t){for(const n of e)try{return{gateway:n,result:await this.catViaGateway(n,t)}}catch(a){console.log(a.message)}throw new Error("File not available")}}var E={install:(e,t)=>{const a=(0,w.iH)();e.provide("IpfsProvider",{instance:a,gateways:t.gateways||[]}),a.value=new F(t.api.gateway)}},Y=a(732),z=a(4564),B=a(3310),L=a(3830),Z=a(5487),G=a(5241),J=a(6220),K=a(4560),q=a(6627),X=a.n(q),Q=a(677),V=a.n(Q);function ee(e,t,a,n){return V().box.open(e,t,a,n)||null}function te(e,t,a,n=(0,Z.F)(24)){return{nonce:n,sealed:V().box(e,n,a,t)}}function ae(e){return X().convertSecretKey(e)}function ne(e){return X().convertPublicKey(e)}function oe(e,t,a){const n=(0,B.Y)(e);return ee(n.slice(24,n.length),n.slice(0,24),ne((0,B.Y)(t)),ae(a))}function re(e,t,a,n){const{nonce:o,sealed:r}=te((0,B.Y)(e),ae(a),ne((0,B.Y)(t)),n);return(0,L.e)(o,r)}function se(e){const t=(0,G.S)(e),a=(0,J.U)(t);return a}function ie(e){return{pair:e,address:(0,K.m)(e.publicKey,32),encodeAddress:(t=32)=>(0,K.m)(e.publicKey,t),decryptMessage:(t,a)=>oe(t,a,e.secretKey),encryptMessage:(t,a,n)=>re(t,a,e.secretKey,n)}}var ce=a(9021),le=a(6134),ue=a(7898),de=a(4129);class pe extends z.Uk{constructor(e,t={},a=null){super(e,a),this.extension=null,e.loadAll(t),this.setReady(!0)}async beforeSetSender(e,{type:t,extension:a}){this.extension=a;try{this.keyring.getPair(e)}catch(n){this.keyring.loadInjected(e,{},t)}}async afterSetSender(){await super.afterSetSender(),this.account.meta.isInjected&&this.extension&&(this.api.setSigner(this.extension.signer),this.account.signMsg=async e=>(await this.extension.signer.signRaw({address:this.account.address,data:(0,le.c)((0,ue.Rl)(e)),type:"bytes"})).signature)}async addUri(e,t={},a="ed25519"){const n=this.keyring.keyring.addFromUri(e,t,a);return await this.setSender(n.address,{type:a})}async addUriPassword(e,t=void 0,a={},n="ed25519"){const{pair:o}=this.keyring.addUri(e,t,a,n);return await this.setSender(o.address,{type:n})}async addJsonPassword(e,t){const a=this.keyring.createFromJson(e);return this.keyring.addPair(a,t),await this.setSender(a.address,{type:a.type})}encryptor(e){if(!this.account.meta.isInjected&&"ed25519"===this.account.type){const t=this.account.toJson(e),a=(0,ce.M)(e,(0,de.tV)(t.encoded));return ie(a)}}}var me={install:async(e,t)=>{const a=(0,w.iH)(!1),n=(0,w.qj)({value:void 0});e.provide("RobonomicsProvider",{isReady:a,instance:n}),n.value=await z.l.createInstance(t),(0,w.IU)(n).value.setAccountManager(new pe(Y.ZP)),a.value=!0}},fe=a(4887);const ve=(0,s._)("b",null,"~ 2 min",-1),we=(0,s._)("span",null,"What is Robonomics",-1),ge=(0,s._)("span",null,"Step-by-step tutorials",-1),he=(0,s._)("span",null,"Advanced cources",-1);function ye(e,t,a,n,o,r){const i=(0,s.up)("robo-template-rws-active"),c=(0,s.up)("robo-text"),l=(0,s.up)("robo-icon"),u=(0,s.up)("robo-link"),d=(0,s.up)("robo-grid"),p=(0,s.up)("robo-details"),m=(0,s.up)("robo-grid-item"),f=(0,s.up)("robo-section"),v=(0,s.up)("robo-button"),w=(0,s.up)("robo-card"),g=(0,s.up)("robo-layout-section");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(g,{width:"middle-wide"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{offset:"x0",minColumnWidth:"200px"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{offset:"x0"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[n.rwsactive&&""!==n.rwsactive?((0,s.wg)(),(0,s.j4)(i,{key:0})):((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s.Wm)(c,{title:"4",align:"left"},{default:(0,s.w5)((()=>[(0,s.Uk)("RWS subscription")])),_:1}),(0,s.Wm)(f,{offset:"x1"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{size:"small",weight:"normal-italic"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{offset:"x0",gap:"x05",columns:"1"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{borderbottom:""},{default:(0,s.w5)((()=>[(0,s.Uk)(" Price from: "),(0,s._)("b",null,"~ "+(0,fe.zw)(n.price)+" XRT ",1),(0,s.Wm)(p,null,{summary:(0,s.w5)((()=>[(0,s.Wm)(l,{icon:"circle-question"})])),default:(0,s.w5)((()=>[(0,s.Wm)(d,{offset:"x0",gap:"x05"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{weight:"bold"},{default:(0,s.w5)((()=>[(0,s.Uk)("Where to buy XRT")])),_:1}),(0,s.Wm)(u,{href:"https://app.basilisk.cloud/trade"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Basilisk ")])),_:1}),(0,s.Wm)(u,{href:"https://app.solarbeam.io/exchange/swap"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Solarbeam ")])),_:1}),(0,s.Wm)(u,{href:"https://trade.kraken.com/markets/kraken/xrt/usd"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Kraken ")])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(m,{borderbottom:""},{default:(0,s.w5)((()=>[(0,s.Uk)(" Activation time "),ve])),_:1}),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" Available subscriptions: "),(0,s._)("b",null,(0,fe.zw)(n.freeAuctions),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(v,{router:n.linkActivate,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{icon:"wallet"}),(0,s.Uk)(" Buy a subscription ")])),_:1},8,["router"])],64))])),_:1})])),_:1}),(0,s.Wm)(f,{offset:"x0"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{title:"4",align:"left"},{default:(0,s.w5)((()=>[(0,s.Uk)("What you get with RWS")])),_:1}),(0,s.Wm)(c,{size:"small",weight:"normal-italic"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{offset:"x0",gap:"x05",columns:"1"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{borderbottom:""},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{icon:"check"}),(0,s.Uk)(" Brand-independent smart home ")])),_:1}),(0,s.Wm)(m,{borderbottom:""},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{icon:"check"}),(0,s.Uk)(" Secured data, only you have access ")])),_:1}),(0,s.Wm)(m,{borderbottom:""},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{icon:"check"}),(0,s.Uk)(" Remote control without corporate clouds ")])),_:1}),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(l,{icon:"check"}),(0,s.Uk)(" Home assistant integration ")])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(f,{offset:"x0"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{title:"4",align:"left"},{default:(0,s.w5)((()=>[(0,s.Uk)("What is RWS")])),_:1}),(0,s.Wm)(c,{weight:"normal-italic",size:"small",offset:"x1"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Robonomics Web Services (RWS) is a smart home integration that enables secure interaction with smart devices and robots through transactions on the Robonomics parachain, rather than relying on centralized cloud services. ")])),_:1}),(0,s.Wm)(c,{weight:"normal-italic",size:"small",offset:"x1"},{default:(0,s.w5)((()=>[(0,s.Uk)(" An RWS subscription ensures stable transaction processing with every block, making it an ideal choice for those who wish to receive data from devices and remotely manage them. ")])),_:1}),(0,s.Wm)(c,{weight:"normal-italic",size:"small",offset:"x1"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Easy to start for Home Assistant users. "),(0,s.Wm)(u,{href:"https://wiki.robonomics.network/docs/hass-image-install/#hardware-you-need-for-installation"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Guide to start ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{id:"home-links",offset:"x0",columns:3,gap:"x05"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{href:"https://www.youtube.com/watch?v=onMv_An8h2Q"},{default:(0,s.w5)((()=>[we])),_:1}),(0,s.Wm)(u,{href:"https://wiki.robonomics.network"},{default:(0,s.w5)((()=>[ge])),_:1}),(0,s.Wm)(u,{href:"https://robonomics.academy"},{default:(0,s.w5)((()=>[he])),_:1})])),_:1})])),_:1})],64)}var be=a(5496),ke={setup(){const e=(0,w.iH)(0),t=(0,w.iH)(0);let a=null;const n=(0,M.oR)(),o=(0,s.Fl)((()=>n.state.robonomicsUIvue.rws.active)),r=(0,s.Fl)((()=>n.state.robonomicsUIvue.rws.links.activate)),i=x();(async()=>{t.value=(await i.rws.getFreeAuctions()).length,a=await i.events.onBlock((async()=>{t.value=(await i.rws.getFreeAuctions()).length}));const n=await i.rws.getMinimalBid();e.value=n.add((0,be.G)(1))})(),(0,s.Ah)((()=>{a&&a()}));const c=(0,s.Fl)((()=>f(e.value,i.api.registry.chainDecimals[0],0)));return{rwsactive:o,linkActivate:r,freeAuctions:t,price:c}}};const _e=(0,h.Z)(ke,[["render",ye]]);var Ue=_e,Se={created:function(){window.location.href=`https://v0.dapp.robonomics.network/${this.$route.href}`}};const We=Se;var xe=We;function Ae(e,t,a,n,o,r){const i=(0,s.up)("robo-template-rws-buy"),c=(0,s.up)("robo-layout-section");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{price:n.price,activationtime:"2",available:n.freeAuctions,chainInfoUploaded:n.chainInfoStatus,rwsExpiration:n.expiredate,onOnActivate:n.onActivate},null,8,["price","available","chainInfoUploaded","rwsExpiration","onOnActivate"])])),_:1})}const Ie=()=>{const e=(0,w.iH)(null),t=x();t.accountManager.account&&(e.value=t.accountManager.account.address);const a=t.accountManager.onChange((t=>{e.value=t.address}));return{account:e,unsubscribe:a}},Me=e=>{const t=(0,w.iH)(null),a=x();let n;return(0,s.YP)(e,(async()=>{n&&n(),n=await a.account.getBalance(e.value,(e=>{t.value=e.free.sub(e.feeFrozen).toNumber()}))})),{balance:t,unsubscribe:n}},Re=()=>{const e=x(),{getFreeWeightCalc:t}=I(),a=async(t,a)=>{if(!a){if(!e.accountManager.account)throw new Error("Signer required");a=e.accountManager.account.address}return(await t.paymentInfo(a)).weight.toNumber()},n=async(e,n)=>{const o=await t(n);if(o<0)throw new Error(`Not found ledger ${n}`);const r=await a(e);if(r>o)throw new Error(`The origin account have no enough free weight to process these call. Call weight ${r}, Free weight ${o}`)},o=()=>{const e=(0,w.iH)(null),t=(0,w.iH)(null),a=(0,w.iH)(!1);return{error:t,process:a,result:e}},r=async(t,a,o=!1)=>{t.result.value=null,t.error.value=null,t.process.value=!0;try{o&&(await n(a,o),e.accountManager.useSubscription(o));const r=await e.api.rpc.system.accountNextIndex(e.accountManager.account.address);t.result.value=await e.accountManager.signAndSend(a,{nonce:r}),console.log("tx",t.result.value.block,t.result.value.tx)}catch(r){console.log(r),t.error.value=r.message}return t.process.value=!1,o&&e.accountManager.useSubscription(!1),t.result};return{createTx:o,send:r}};var Oe={setup(){(0,H.QI)({title:"Buy a subscription"});const e=(0,w.iH)(0),t=(0,w.iH)(0),a=(0,w.iH)(!1);let n=null;const o=x(),{account:r,unsubscribe:i}=Ie(),{balance:c,unsubscribe:l}=Me(r),u=I(r),d=A(r);(async()=>{t.value=(await o.rws.getFreeAuctions()).length,n=await o.events.onBlock((async()=>{t.value=(await o.rws.getFreeAuctions()).length}));const r=await o.rws.getMinimalBid();e.value=r.add((0,be.G)(1)),a.value=!0})(),(0,s.Ah)((()=>{n&&n(),l&&l(),i()}));const p=Re(),m=async a=>{if(!c.value||(0,be.G)(c.value).lt(e.value.add((0,be.G)(1e7))))return void a("error","Subscription can not be activated due to unsuffcicient XRT balance");if(t.value<=0)return void a("error","There are no available subscriptions");if(u.hasSubscription.value&&u.isActive.value)return void a("error","You have an active subscription");let n=o.rws.bid(Number(await o.rws.getFirtsFreeAuction()),e.value);d.devices.value.includes(r.value)||(n=o.api.tx.utility.batch([n,o.rws.setDevices([...d.devices.value,r.value])]));const i=p.createTx();if(await p.send(i,n),i.error.value)return void("Cancelled"!==i.error.value?a("error",i.error.value):a("cancel"));const l=await o.events.onBlock((()=>{u.loadLedger()})),m=(0,s.m0)((()=>{u.hasSubscription.value&&u.isActive.value&&(m(),l(),a("ok"))}))},v=(0,s.Fl)((()=>f(e.value,o.api.registry.chainDecimals[0])));return{freeAuctions:t,price:v,expiredate:u.validUntil,chainInfoStatus:a,onActivate:m}}};const je=(0,h.Z)(Oe,[["render",Ae]]);var Pe=je;function Te(e,t,a,n,o,r){const i=(0,s.up)("robo-template-rws-setup"),c=(0,s.up)("robo-layout-section");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{onRwsUpdate:n.rwsUpdateActions,onUserDelete:n.removeUser,onUserAdd:n.addUser,onSaveHapass:n.saveHapass},null,8,["onRwsUpdate","onUserDelete","onUserAdd","onSaveHapass"])])),_:1})}var He=a(2573),Ce=a(6444),$e={setup(){(0,H.QI)({title:"Setup"});const e=(0,M.oR)(),t=(0,s.Fl)((()=>e.state.robonomicsUIvue.rws.active)),a=x(),n=Re(),o=A(t),{account:r}=Ie(),i=()=>{e.commit("rws/setUsers",o.devices.value)};(0,s.YP)(o.devices,i);const c=(e,t)=>{if(!e.owner||!e.name||!e.controller||!e.scontroller)return void t("error","All fields are required");try{(0,K.m)(e.owner)}catch(o){return void t("error",`Owner: ${o.message}`)}try{(0,K.m)(e.controller)}catch(o){return void t("error",`Controller: ${o.message}`)}const a=new He.Y,n=a.addFromUri(e.scontroller,{},"ed25519");(0,K.m)(e.controller)===n.address?t("ok"):t("error","Bad seed or type not ed25519")},l=async(e,s)=>{if(t.value&&t.value!==r.value)s("error","You do not have access to this action.");else{if(!o.devices.value.includes(e)){const i=await a.rws.setDevices([...o.devices.value,e]),c=n.createTx();if(o.devices.value.includes(r.value)?await n.send(c,i,t.value):await n.send(c,i),c.error.value)return void("Cancelled"!==c.error.value?s("error",c.error.value):s("cancel"));await o.loadDevices()}s("ok")}},u=async(e,s)=>{if(t.value&&t.value!==r.value)s("error","You do not have access to this action.");else{if(o.devices.value.includes(e)){const i=await a.rws.setDevices(o.devices.value.filter((t=>t!==e))),c=n.createTx();if(o.devices.value.includes(r.value)?await n.send(c,i,t.value):await n.send(c,i),c.error.value)return void("Cancelled"!==c.error.value?s("error",c.error.value):s("cancel"));await o.loadDevices()}s("ok")}},d=async(r,s,i,c)=>{if(!r||!s||!i)return void c("error","All fields are required");try{(0,K.m)(r)}catch(y){return void c("error",y.message)}const l=new He.Y,u=l.addFromUri(s,{},"ed25519");if((0,K.m)(r)!==u.address)return void c("error","Bad seed or type not ed25519");const d=o.devices.value.map((e=>(0,K.m)(e)));if(!d.includes((0,K.m)(r)))return void c("error","User not found in subscription");const p=e.state.robonomicsUIvue.rws.list.find((e=>e.owner===t.value)),m=ie(se(s)),f=m.encryptMessage(i,(0,Ce.m)(p.controller)),v=m.encryptMessage(i,(0,Ce.m)(r));a.accountManager.account=u;const w=await a.datalog.write(JSON.stringify({subscription:p.owner,ha:p.controller,admin:(0,le.c)(f),user:(0,le.c)(v)})),g=n.createTx();if(await n.send(g,w,p.owner),g.error.value){if("Cancelled"===g.error.value)return void c("cancel");c("error",g.error.value)}const h=e.state.robonomicsUIvue.polkadot.accounts.find((t=>t.address===e.state.robonomicsUIvue.polkadot.address));await a.accountManager.setSender(h.address,{type:h.type,extension:e.state.robonomicsUIvue.polkadot.extensionObj}),c("ok")};return{saveHapass:d,rwsUpdateActions:c,addUser:l,removeUser:u}}};const Ne=(0,h.Z)($e,[["render",Te]]);var De=Ne;function Fe(e,t,a,n,o,r){const i=(0,s.up)("robo-template-rws-setup"),c=(0,s.up)("robo-layout-section");return(0,s.wg)(),(0,s.j4)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{create:"",onRwsUpdate:n.onSave},null,8,["onRwsUpdate"])])),_:1})}var Ee={setup(){(0,H.QI)({title:"New setup"});let e=(e,t)=>{if(!e.owner||!e.name||!e.controller||!e.scontroller)return void t("error","All fields are required");try{(0,K.m)(e.owner)}catch(o){return void t("error",`Owner: ${o.message}`)}try{(0,K.m)(e.controller)}catch(o){return void t("error",`Controller: ${o.message}`)}const a=new He.Y,n=a.addFromUri(e.scontroller,{},"ed25519");(0,K.m)(e.controller)===n.address?t("ok"):t("error","Bad seed or type not ed25519")};return{onSave:e}}};const Ye=(0,h.Z)(Ee,[["render",Fe]]);var ze=Ye;function Be(e,t,a,n,o,r){const i=(0,s.up)("robo-image"),c=(0,s.up)("robo-link"),l=(0,s.up)("robo-text"),u=(0,s.up)("robo-card"),d=(0,s.up)("robo-grid"),p=(0,s.up)("robo-layout-section");return(0,s.wg)(),(0,s.j4)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{offset:"x0",gap:"x1",galign:"start",minColumnWidth:"450px"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{router:"/telemetry"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{src:"images/services-ha.jpg"})])),_:1}),(0,s.Wm)(l,{title:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{router:"/telemetry"},{default:(0,s.w5)((()=>[(0,s.Uk)("Home assistant")])),_:1})])),_:1}),(0,s.Wm)(l,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Integrate Robonomics into your Home assistant dashboard and get Parachain decentralized cloud service all over the word. Manipulate your smart devices bypassing corporate clouds, manage user access wherever you are. Backup your smart home data in blockchain. ")])),_:1})])),_:1}),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:"https://sensors.robonomics.network/#/"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{src:"images/services-sensors.jpg"})])),_:1}),(0,s.Wm)(l,{title:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:"https://sensors.robonomics.network/#/"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Sensors Map ")])),_:1})])),_:1}),(0,s.Wm)(l,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" The decentralized opensource sensors map offers two distinct layers of decentralization at your choise: peer-to-peer connectivity for direct access to sensor data, and the federative concept for accumulating sensor data and displaying measurement history. Anyone can assemble your own sensor using components available on the free market. ")])),_:1})])),_:1}),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:"https://dapp.spot-sdk.education"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{src:"images/services-spot.jpg"})])),_:1}),(0,s.Wm)(l,{title:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:"https://dapp.spot-sdk.education"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Boston Dynamics Spot SDK lessons ")])),_:1})])),_:1}),(0,s.Wm)(l,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Learn and practice with the Boston Dynamics Spot robot wherever you are. After each lesson you will receive a captured video of the robot movements and a printable PDF certificate. ")])),_:1})])),_:1}),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:"https://telescope.merklebot.com/#/"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{src:"images/services-telescope.jpg"})])),_:1}),(0,s.Wm)(l,{title:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:"https://telescope.merklebot.com/#/"},{default:(0,s.w5)((()=>[(0,s.Uk)(" An Autonomous Telescope Minting RMRK NFT's ")])),_:1})])),_:1}),(0,s.Wm)(l,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Connect to an autonomous telescope in the dark night of the Atacama desert in Chile to capture an astronomical object and mint unique NFTs in a few clicks. ")])),_:1})])),_:1}),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:"https://dapp.ipci.io/#/offsetting"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{src:"images/services-offsetting.jpg"})])),_:1}),(0,s.Wm)(l,{title:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:"https://dapp.ipci.io/#/offsetting"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Smart Building Offsetting ")])),_:1})])),_:1}),(0,s.Wm)(l,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Carbon footprint clearance for smart buildings based on geolocation and energy consumption information. ")])),_:1})])),_:1})])),_:1})])),_:1})}var Le={setup(){(0,H.QI)({title:"Services"})}};const Ze=(0,h.Z)(Le,[["render",Be]]);var Ge=Ze;const Je={class:"temp_toggler"};function Ke(e,t,a,n,o,r){const i=(0,s.up)("robo-button"),c=(0,s.up)("Libp2p"),l=(0,s.up)("Launch");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Je,[(0,s.Wm)(i,{onClick:t[0]||(t[0]=e=>n.type="launch"),disabled:"launch"===n.type,size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Parachain ")])),_:1},8,["disabled"]),(0,s.Wm)(i,{onClick:t[1]||(t[1]=e=>n.type="libp2p"),disabled:"libp2p"===n.type,size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Libp2p ")])),_:1},8,["disabled"])]),"libp2p"===n.type?((0,s.wg)(),(0,s.j4)(c,{key:0,config:n.config,onError:n.error},null,8,["config","onError"])):((0,s.wg)(),(0,s.j4)(l,{key:1,config:n.config},null,8,["config"]))],64)}function qe(e,t,a,n,o,r){const i=(0,s.up)("robo-template-devices-layout");return(0,s.wg)(),(0,s.j4)(i,{config:a.config,datalog:n.data,updateTime:n.updateTime},null,8,["config","datalog","updateTime"])}function Xe(){const{account:e}=Ie(),{instance:t}=(0,s.f3)("IpfsProvider");return(0,s.YP)(e,(async()=>{t.value&&t.value.authClear()})),t.value}var Qe=a(2760);const Ve=e=>e.replaceAll("'",'"').replaceAll("\\","").replaceAll('""','"').replaceAll("True","true").replaceAll("False","false").replaceAll("None",'"None"'),et=e=>{try{return JSON.parse(e)}catch(t){console.log("error parse 1")}try{return JSON.parse(Ve(e))}catch(t){console.log("error parse 2"),console.log(e)}return!1},tt=async(e,t)=>{const a=await e.datalog.getLastId(t);return a.id},at=async(e,t)=>{if(console.log("getLastDatalog"),!t)return!1;const a=await tt(e,t);if(null!==a&&a>=0){const n=await e.datalog.readByIndex(t,a);return{timestamp:n[0].toNumber(),cid:(0,Qe.z)(n[1])}}return!1},nt=async(e,t,a)=>{if(console.log("getConfigCid"),!t||!a)return!1;const n=await e.twin.getTwin(a);if(!n)return!1;const o=Object.keys(n).find((e=>n[e]===t));return z.P6.hexToCid(o)};var ot=a(8537),rt=a(8434);const st=32,it=async(e,t,a)=>{if(!a)return!1;try{return await t.catViaGateway(e.state.robonomicsUIvue.ipfs.activegateway,a,2)}catch(n){try{const n=await t.catViaGateways(e.state.robonomicsUIvue.ipfs.gateways,a);return e.commit("ipfs/setActiveGateway",n.gateway),n.result}catch(o){console.log(o.message)}}return!1},ct=async(e,t)=>{if(e)try{const a=t.decryptMessage((0,rt.G)(e[t.address]),t.pair.publicKey),n=ie(se((0,Qe.z)(a))),o=n.decryptMessage((0,rt.G)(e.data),t.pair.publicKey);return et((0,Qe.z)(o))}catch(a){console.log(a.message)}return!1},lt=async(e,t,a,n)=>{if(e){const o=await it(a,n,e);if(!o)return console.log(`Error: ${e} not found in ipfs`),null;const r=await ct(o,t);if(r)return r;console.log("Error: decryptMsg")}return null},ut=e=>{if(e.state.robonomicsUIvue.rws.active){const a=e.state.robonomicsUIvue.rws.list.find((t=>t.owner===e.state.robonomicsUIvue.rws.active));if(a)try{return{controller:ie(se(a.scontroller)),owner:a.owner}}catch(t){console.log(t)}}return!1},dt=()=>{const e=(0,w.iH)(null),t=(0,w.iH)(null),a=(0,M.oR)();return(0,s.YP)((()=>a.state.robonomicsUIvue.rws.active),(()=>{const n=ut(a);n&&(e.value=n.controller,t.value=n.owner)}),{immediate:!0}),{controller:e,owner:t}},pt=(e,t,a=3e3)=>{e.dispatch("app/setStatus",{value:t,timeout:a}),console.log(t)},mt=(e,t,a)=>{e.commit("rws/setLaunch",JSON.stringify({...t,tx:{tx_status:a}}))},ft=()=>{const e=(0,w.iH)(null),t=(0,M.oR)(),a=Xe(),n=x(),{controller:o}=dt();return(async()=>{if(o.value){pt(t,"Find twin id");const r=await at(n,o.value.address),s=await lt(r.cid,o.value,t,a);if(s){const r=s.twin_id;pt(t,`Twin id #${r}`),pt(t,"Start load config");const i=await nt(n,o.value.address,r);e.value=await lt(i,o.value,t,a),localStorage.setItem(`haconfig:${o.value.address}`,JSON.stringify(e.value)),pt(t,"Config loaded")}else pt(t,"Error: not found twin id")}})(),{config:e}},vt=()=>{const e=(0,w.iH)(null),t=(0,w.iH)(null),a=(0,w.iH)(null),n=(0,M.oR)(),o=Xe(),r=x(),i=Re(),c=A(),{controller:l,owner:u}=dt();(0,s.YP)((()=>n.state.robonomicsUIvue.rws.active),(()=>{c.owner.value=n.state.robonomicsUIvue.rws.active}),{immediate:!0});const d=new He.Y({ss58Format:st});let p;const m=async()=>{p=await r.datalog.on({method:"NewRecord"},(a=>{const n=a.filter((e=>e.success&&l.value&&e.data[0].toHuman()===l.value.address));for(const o of n)t.value=o.data[1].toNumber(),e.value=o.data[2].toHuman()}))};(0,s.YP)(e,(async()=>{a.value=await lt(e.value,l.value,n,o,d)}));const f=async()=>{if(l.value){const a=await at(r,l.value.address);e.value=a.cid,t.value=a.timestamp}m()},v=()=>{p&&p()};(0,s.Ah)((()=>{console.log("unmount launch"),v()}));const g=async()=>{const e=r.accountManager.keyring.keyring.addFromPair(l.value.pair);await r.accountManager.setSender(e.address,{type:e.type,extension:null})},h=async()=>{const e=n.state.robonomicsUIvue.polkadot.accounts.find((e=>e.address===n.state.robonomicsUIvue.polkadot.address));await r.accountManager.setSender(e.address,{type:e.type,extension:n.state.robonomicsUIvue.polkadot.extensionObj})},y=async e=>{if(console.log(e.launch.params.entity_id,e.tx.tx_status),"pending"!==e.tx.tx_status)return;if(pt(n,"Launch command"),console.log(`command ${JSON.stringify(e)}`),await g(),r.accountManager.account.address!==n.state.robonomicsUIvue.rws.active&&!c.devices.value.includes(r.accountManager.account.address))return pt(n,"Error: You do not have access to device management."),mt(n,e,"error"),void await h();if(!o.isAuth()){pt(n,"Authorization on ipfs node");try{const e=(await r.accountManager.account.signMsg((0,ot.d)(r.accountManager.account.address))).toString();o.auth(u.value,r.accountManager.account.address,e)}catch(d){return"Cancelled"===d.message?mt(n,e,"declined"):(console.log(d),mt(n,e,"error")),void await h()}mt(n,e,"approved")}let t;try{const a=JSON.stringify(e.launch),n=l.value.encryptMessage(a,l.value.pair.publicKey);t=await o.add((0,le.c)(n))}catch(d){return mt(n,e,"error"),pt(n,`Error: ${d.message}`),void await h()}console.log(`launch ipfs file ${t.path}`),pt(n,"Send launch");const a=r.launch.send(l.value.address,t.path),s=i.createTx();await i.send(s,a,u.value),s.error.value?"Cancelled"!==s.error.value?(mt(n,e,"error"),pt(n,`Error: ${s.error.value}`)):(mt(n,e,"declined"),pt(n,"Calcel")):(console.log(e),mt(n,e,"success"),pt(n,"Launch sended")),await h()};return{cid:e,updateTime:t,data:a,run:f,stop:v,launch:y}};var wt={props:{config:Object},setup(){const{data:e,updateTime:t,run:a,launch:n}=vt(),o=(0,M.oR)();return a(),(0,s.YP)((()=>o.state.robonomicsUIvue.rws.launch),(e=>{try{n(JSON.parse(e))}catch(t){console.log(t)}})),{data:e,updateTime:t}}};const gt=(0,h.Z)(wt,[["render",qe]]);var ht=gt;function yt(e,t,a,n,o,r){const i=(0,s.up)("robo-template-devices-layout");return(0,s.wg)(),(0,s.j4)(i,{config:a.config,datalog:n.data,updateTime:n.updateTime},null,8,["config","datalog","updateTime"])}var bt=a(1561),kt=a(5800),_t=a(4071),Ut=a(5492),St=a(2373),Wt=a(55),xt=a(7993),At=a(6614),It=a(8816),Mt=a(4521),Rt=a(6046),Ot=a(2672);function jt(){return e=>{async function t(e){return(0,Mt.z)(e,(async function(e){let t="";for await(const a of e)t+=(0,Ot.B)(a.subarray());return JSON.parse(t)}))}async function a(e,t){return(0,Mt.z)([(0,Rt.m)(JSON.stringify(t))],e.sink).finally((()=>{e.close()}))}return{async handle(a,n,o={runOnTransientConnection:!0}){await e.registrar.handle(a,(async({stream:e})=>{n(await t(e),e)}),o)},async request(e,t,a,n={runOnTransientConnection:!0}){if("open"!==e.status)return;const o=await e.newStream([t],n);return(0,Mt.z)([(0,Rt.m)(JSON.stringify(a))],o,(async function(e){let t="";for await(const n of e)t+=(0,Ot.B)(n.subarray());try{return o.close(),JSON.parse(t)}catch(a){return t}}))},utils:{getRequest:t,sendResponse:a}}}}async function Pt(){const e=await(0,It.N)({addresses:{listen:["/webrtc"]},transports:[(0,Wt.E)({filter:xt.$6}),(0,St.Z)(),(0,kt.f)()],streamMuxers:[(0,Ut.R)()],connectionEncryption:[(0,bt.t)()],services:{identify:(0,_t.y)(),ha:jt()},connectionGater:{denyDialMultiaddr:()=>!1},connectionManager:{minConnections:0}});return e}function Tt(e){return new Promise(((t,a)=>{const n=setTimeout((()=>{a(new Error("timeout"))}),1e4),o=new WebSocket(e);o.addEventListener("error",(()=>{clearTimeout(n),a(new Error("connect"))})),o.addEventListener("open",(()=>{o.close(),clearTimeout(n),t()}))}))}function Ht(e){return`/dns4/libp2p-relay-1.robonomics.network/tcp/443/wss/p2p/12D3KooWEMFXXvpZUjAuj1eKR11HuzZTCQ5HmYG9MNPtsnqPSERD/p2p-circuit/p2p/${e}`}async function Ct(e,t){if(t&&"https:"!==window.location.protocol){const e=(0,At.HM)(t),n=e.nodeAddress();if(e.protoNames().includes("ws")){const t=`ws://${n.address}:${n.port}`;try{return console.log("check wsUri",t),await Tt(t),e}catch(a){console.log(a)}}}return Ht(e)}let $t=null,Nt=[],Dt=null;async function Ft(){if($t)return $t;function e(){Nt=$t.getConnections().map((e=>e.remoteAddr.toString())),console.log("Update Connections List",Nt)}return $t=await Pt(),await $t.start(),console.log(`Node started with id ${$t.peerId.toString()}`),$t.addEventListener("connection:open",(t=>{console.log("connected",t.detail.remoteAddr.toString()),e()})),$t.addEventListener("connection:close",(t=>{console.log("disconected",t.detail.remoteAddr.toString()),e(),setTimeout((()=>{Dt&&t.detail.remoteAddr.toString()===Dt.remoteAddr.toString()&&(console.log("reconnect"),Et(Dt.remoteAddr.toString()))}),1e4)})),$t}async function Et(e){try{await Yt(e)}catch(t){console.log(t)}}async function Yt(e){if(!Nt.includes(e)){const t=(0,At.HM)(e);Dt=await $t.dial(t)}}async function zt(){Dt&&await Dt.close(),Dt=null}function Bt(e,t="/call"){if($t&&Dt)return $t.services.ha.request(Dt,t,e);throw new Error("error")}const Lt=()=>{const e=(0,w.iH)(null),t=(0,w.iH)(null),a=(0,M.oR)(),n=x(),o=A(),{controller:r}=dt();(0,s.YP)((()=>a.state.robonomicsUIvue.rws.active),(()=>{o.owner.value=a.state.robonomicsUIvue.rws.active}),{immediate:!0});const i=new He.Y({ss58Format:st});(0,s.Ah)((()=>{zt()}));const c=async(n,o)=>{const s=await Ft();try{pt(a,`Connect to peer id ${n} - ${o}`);const c=await Ct(n,o);console.log("Connect",c),await Yt(c),pt(a,"Connected");const l=s.getProtocols();return l.includes("/update")&&await s.unhandle("/update"),s.services.ha.handle("/update",(async(n,o)=>{const c=await ct(n.data,r.value,i);c?(e.value=c,t.value=Date.now(),await s.services.ha.utils.sendResponse(o,{result:!0})):pt(a,"Error: decryptMsg")})),!0}catch(c){pt(a,`Error: ${c.message}`),console.log(c)}return!1},l=async()=>{const e=n.accountManager.keyring.keyring.addFromPair(r.value.pair);await n.accountManager.setSender(e.address,{type:e.type,extension:null})},u=async()=>{const e=a.state.robonomicsUIvue.polkadot.accounts.find((e=>e.address===a.state.robonomicsUIvue.polkadot.address));await n.accountManager.setSender(e.address,{type:e.type,extension:a.state.robonomicsUIvue.polkadot.extensionObj})},d=async e=>{if(console.log(e.launch.params.entity_id,e.tx.tx_status),"pending"===e.tx.tx_status){if(pt(a,"Launch command"),await l(),n.accountManager.account.address!==a.state.robonomicsUIvue.rws.active&&!o.devices.value.includes(n.accountManager.account.address))return pt(a,"Error: You do not have access to device management."),mt(a,e,"error"),void await u();try{const t=JSON.stringify(e.launch),n=r.value.encryptMessage(t,r.value.pair.publicKey),o=await Bt({data:(0,le.c)(n)});console.log("response:",o),mt(a,e,"success")}catch(t){console.log(t),pt(a,"Error: Check status of the HomeAssistant."),mt(a,e,"error")}await u()}};return{data:e,updateTime:t,run:c,launch:d}};var Zt={props:{config:Object},emits:["error"],setup(e,{emit:t}){const{data:a,updateTime:n,run:o,launch:r}=Lt();(0,s.YP)((()=>({...e.config})),((a,n)=>{a&&a.peer_id?(!n||0===Object.keys(n).length||n.peer_id&&a.peer_id!==n.peer_id)&&(async()=>{const e=await o(a.peer_id,a.local_libp2p_multiaddress);e||t("error")})():null!==e.config&&(console.log("Error: not peer_id"),console.log(e.config),t("error"))}),{immediate:!0});const i=(0,M.oR)();return(0,s.YP)((()=>i.state.robonomicsUIvue.rws.launch),(e=>{try{r(JSON.parse(e))}catch(t){console.log(t)}})),{data:a,updateTime:n}}};const Gt=(0,h.Z)(Zt,[["render",yt]]);var Jt=Gt,Kt={setup(){const e=(0,w.iH)(localStorage.getItem("typeTelemetry")||"launch"),{config:t}=ft();return(0,s.YP)([t,e],(()=>{t.value&&!t.value.peer_id&&"libp2p"===e.value&&(console.log("Error: not peer_id"),console.log(t.value),e.value="launch")})),(0,s.YP)(e,(()=>{localStorage.setItem("typeTelemetry",e.value)})),{type:e,config:t,error:()=>{e.value="launch"}}},components:{Libp2p:Jt,Launch:ht}};const qt=(0,h.Z)(Kt,[["render",Ke],["__scopeId","data-v-56c34e2a"]]);var Xt=qt;const Qt=[{path:"/",name:"Home",component:Ue,meta:{title:"Dashboard"}},{path:"/rws-buy",name:"rwsActivate",component:Pe,meta:{title:"Buy a Subscription"}},{path:"/rws-setup",name:"rwsSetup",component:De,meta:{title:"Setup a Subscription"}},{path:"/rws-setup-new",name:"rwsSetupNew",component:ze,meta:{title:"New Subscription setup"}},{path:"/telemetry",name:"telemetry",component:Xt,meta:{title:"Devices control panel"}},{path:"/services",name:"services",component:Ge,meta:{title:"Services"}},{path:"/:pathMatch(.*)*",component:xe}],Vt=(0,P.p7)({history:(0,P.r5)(),routes:Qt});var ea=Vt;const ta=(0,M.MT)({state:{name:"Vue"}});var aa=ta,na={install:e=>{e.config.globalProperties.$filters={balance(e,t,a){return"string"===typeof e||"number"===typeof e?`${f(e,t,4)} ${a}`:""}}}},oa=a(2630);window.Buffer=n.lW;const ra=(0,r.ri)(N),sa=(0,oa.c)();ra.use(ea).use(aa).use(na).use(me,{endpoint:"wss://kusama.rpc.robonomics.network/"}).use(E,{api:{gateway:"https://ipfs.url.today"},gateways:["https://ipfs.url.today/ipfs/","https://cf-ipfs.com/ipfs/","https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://gateway.ipfs.io/ipfs/","https://aira.mypinata.cloud/ipfs/"]}).use(o.$,{store:aa}).use(sa).mount("#app")},5856:function(){},6601:function(){},2480:function(){},3897:function(){},5024:function(){}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,n,o,r){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],r=e[u][2];for(var i=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var r=Object.create(null);a.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){s[e]=function(){return n[e]}}));return s["default"]=function(){return n},a.d(r,s),r}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,s=n[0],i=n[1],c=n[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(c)var u=c(a)}for(t&&t(n);l<s.length;l++)r=s[l],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self["webpackChunkdapp_robonomics_network"]=self["webpackChunkdapp_robonomics_network"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(3529)}));n=a.O(n)})();
//# sourceMappingURL=app.8a00271b.js.map